<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>GMã‚·ãƒ¼ãƒ«æŠ½é¸ä¼š</title>

<style>
  body {
    margin: 0;
    font-family: "Rounded Mplus 1c", sans-serif;
    background: linear-gradient(#fff7fb, #ffeaf4);
    text-align: center;
  }

  h1 {
    font-size: 42px;
    color: #ff4f9a;
    margin: 20px 0;
  }

  .screen { display: none; }
  .active { display: block; }

  .slot {
    width: 360px;
    height: 360px;
    margin: 20px auto;
    border: 12px solid #ff9fc9;
    border-radius: 30px;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #sealArea img {
    max-width: 95%;
    max-height: 95%;
  }

  .resultText {
    font-size: 26px;
    margin-top: 12px;
    color: #444;
    line-height: 1.5;
  }

  button {
    font-size: 28px;
    padding: 16px 50px;
    margin: 12px;
    border-radius: 40px;
    border: none;
    background: #ff4f9a;
    color: white;
    cursor: pointer;
  }
</style>
</head>

<body>

<!-- ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ -->
<div id="intro" class="screen active">
  <h1>ğŸ‰ GMã‚·ãƒ¼ãƒ«æŠ½é¸ä¼š ğŸ‰</h1>
  <button onclick="playIntroNarration()">ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å†ç”Ÿ</button><br>
  <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<!-- ã‚¹ãƒ­ãƒƒãƒˆç”»é¢ -->
<div id="game" class="screen">
  <h1>ğŸ‰ GMã‚·ãƒ¼ãƒ«æŠ½é¸ä¼š ğŸ‰</h1>

  <div class="slot">
    <div id="sealArea">
      <img src="stickers01.png">
    </div>
  </div>

  <button onclick="spin()">ã‚·ãƒ¼ãƒ«ã‚’å¼•ã</button>
  <button onclick="fullscreen()">å…¨ç”»é¢</button>
</div>

<!-- åŠ¹æœéŸ³ -->
<audio id="startSound" src="start.mp3"></audio>
<audio id="spinSound" src="spin.mp3" loop></audio>
<audio id="winSound" src="fanfare.mp3"></audio>

<script>
  /* ===== ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…±é€šé–¢æ•°ï¼ˆã‚†ã£ãã‚Šç‰ˆï¼‰ ===== */
  function speak(text) {
    const uttr = new SpeechSynthesisUtterance(text);
    uttr.lang = "ja-JP";
    uttr.rate = 0.85;   // â† ã‚†ã£ãã‚Š
    uttr.pitch = 1.0;   // è½ã¡ç€ã„ãŸå£°
    speechSynthesis.cancel();
    speechSynthesis.speak(uttr);
  }

  /* ===== é–‹å§‹ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
  function playIntroNarration() {
    const text = `
ï¼‘å¹´é–“ã€GMãƒãƒ£ãƒ¬ãƒ³ã‚¸ã€‚
ãŒã‚“ã°ã‚Šã¾ã—ãŸã­ã€‚

ã“ã‚Œã‹ã‚‰ã€
GMã‚·ãƒ¼ãƒ«æŠ½é¸ä¼šã‚’å§‹ã‚ã¾ã™ã€‚

ã‚¹ãƒ­ãƒƒãƒˆãŒã¾ã‚ã‚Šã€
æ­¢ã¾ã£ãŸã‚·ãƒ¼ãƒ«ãŒã€
ã‚ãªãŸã®ã‚¯ãƒ©ã‚¹ã®
ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ã§ã™ã€‚

ãã‚Œã§ã¯ã€
ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚
    `;
    speak(text);
  }

  /* ===== çµ‚äº†ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
  function playEndNarration() {
    const text = `
ã¿ãªã•ã‚“ã€‚
è‡ªåˆ†ã®GMã‚«ãƒ¼ãƒ‰ã«ã€
ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ã¯ã‚ã‚Šã¾ã—ãŸã‹ã€‚
ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ãŒã‚ã£ãŸäººã¯ã€
ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚
æ¥æœˆã€
ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ãŒã‚ã£ãŸäººã«ã¯ã€
æ™¯å“ã‚’ãŠæ¸¡ã—ã—ã¾ã™ã€‚

GMã‚«ãƒ¼ãƒ‰ã¯ã€
ãªãã•ãªã„ã‚ˆã†ã«ã€
å…ˆç”Ÿã«æ¸¡ã—ã¦ãã ã•ã„ã€‚

ã¾ãŸã€
ã‚·ãƒ¼ãƒ«ãŒãªã‹ã£ãŸäººã‚‚ã€
ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ã‚’
è¦‹é€ƒã—ã¦ã„ãªã„ã‹ã€
ä¿å¥å®¤ã§ç¢ºèªã™ã‚‹ã®ã§ã€
å…ˆç”Ÿã«æ¸¡ã—ã¦ãã ã•ã„ã€‚

æ¥å¹´ã‚‚ã€
GMãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã€
å…ƒæ°—ã«ç”Ÿæ´»ã—ã¾ã—ã‚‡ã†ã€‚

ãã‚Œã§ã¯ã€
GMã‚·ãƒ¼ãƒ«æŠ½é¸ä¼šã‚’
çµ‚ã‚ã‚Šã¾ã™ã€‚
    `;
    speak(text);
  }

  /* ===== ã‚¹ãƒ­ãƒƒãƒˆå‡¦ç† ===== */
  const seals = Array.from({ length: 40 }, (_, i) => `stickers${i + 1}.png`);
  const sealArea = document.getElementById("sealArea");

  let spinInterval;
  let spinning = false;

  function startGame() {
    speechSynthesis.cancel();
    document.getElementById("intro").classList.remove("active");
    document.getElementById("game").classList.add("active");
  }

  function spin() {
    if (spinning) return;
    spinning = true;

    startSound.currentTime = 0;
    startSound.play();

    spinSound.currentTime = 0;
    spinSound.play();

    spinInterval = setInterval(() => {
      const n = Math.floor(Math.random() * seals.length);
      sealArea.innerHTML = `<img src="${seals[n]}">`;
    }, 90);

    setTimeout(stopSpin, 3000);
  }

  function stopSpin() {
    clearInterval(spinInterval);
    spinSound.pause();

    const n = Math.floor(Math.random() * seals.length);

    sealArea.innerHTML = `
      <div>
        <img src="${seals[n]}" style="max-width:95%;"><br>
        <div class="resultText">
          ã‚ãªãŸã®ã‚¯ãƒ©ã‚¹ã®<br>
          ã‚ãŸã‚Šã‚·ãƒ¼ãƒ«ã¯ã€<br>
          <strong>ã“ã®ã‚·ãƒ¼ãƒ«ã§ã™ï¼</strong><br>
          ï¼ˆNo.${n + 1}ï¼‰
        </div>
      </div>
    `;

    winSound.currentTime = 0;
    winSound.play();

    setTimeout(playEndNarration, 1500);
    spinning = false;
  }

  function fullscreen() {
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    }
  }
</script>

</body>
</html>
